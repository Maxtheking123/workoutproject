{"ast":null,"code":"import React,{createContext,useState,useEffect}from'react';import axios from'axios';import{decodeToken}from'../utils/decodeToken';import{jsx as _jsx}from\"react/jsx-runtime\";const AuthContext=/*#__PURE__*/createContext();const axiosInstance=axios.create({baseURL:'http://localhost:5000'// Set your base URL here\n});const AuthProvider=_ref=>{let{children}=_ref;const[user,setUser]=useState(null);useEffect(()=>{const token=localStorage.getItem('token');if(token){axiosInstance.defaults.headers.common['Authorization']=\"Bearer \".concat(token);const decodedToken=decodeToken(token);setUser({username:decodedToken.username});}},[]);const login=async(username,password)=>{const response=await axiosInstance.post('/api/auth/login',{username,password});const token=response.data.token;localStorage.setItem('token',token);axiosInstance.defaults.headers.common['Authorization']=\"Bearer \".concat(token);const decodedToken=decodeToken(token);setUser({username:decodedToken.username});};const register=async(username,password)=>{await axiosInstance.post('/api/auth/register',{username,password});};const logout=()=>{localStorage.removeItem('token');delete axiosInstance.defaults.headers.common['Authorization'];setUser(null);};const fetchCalendarEntries=async()=>{const response=await axiosInstance.get('/api/calendar/entries');return response.data;};const addCalendarEntry=async entry=>{const response=await axiosInstance.post('/api/calendar/entries',entry);return response.data;};const updateCalendarEntry=async(id,entry)=>{const response=await axiosInstance.put(\"/api/calendar/entries/\".concat(id),entry);return response.data;};const deleteCalendarEntry=async id=>{const response=await axiosInstance.delete(\"/api/calendar/entries/\".concat(id));return response.data;};return/*#__PURE__*/_jsx(AuthContext.Provider,{value:{user,login,register,logout,fetchCalendarEntries,addCalendarEntry,updateCalendarEntry,deleteCalendarEntry},children:children});};export{AuthContext,AuthProvider};","map":{"version":3,"names":["React","createContext","useState","useEffect","axios","decodeToken","jsx","_jsx","AuthContext","axiosInstance","create","baseURL","AuthProvider","_ref","children","user","setUser","token","localStorage","getItem","defaults","headers","common","concat","decodedToken","username","login","password","response","post","data","setItem","register","logout","removeItem","fetchCalendarEntries","get","addCalendarEntry","entry","updateCalendarEntry","id","put","deleteCalendarEntry","delete","Provider","value"],"sources":["/Users/06mali01/WebstormProjects/workoutproject/frontend/src/context/AuthContext.js"],"sourcesContent":["import React, { createContext, useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { decodeToken } from '../utils/decodeToken';\n\nconst AuthContext = createContext();\n\nconst axiosInstance = axios.create({\n    baseURL: 'http://localhost:5000', // Set your base URL here\n});\n\nconst AuthProvider = ({ children }) => {\n    const [user, setUser] = useState(null);\n\n    useEffect(() => {\n        const token = localStorage.getItem('token');\n        if (token) {\n            axiosInstance.defaults.headers.common['Authorization'] = `Bearer ${token}`;\n            const decodedToken = decodeToken(token);\n            setUser({ username: decodedToken.username });\n        }\n    }, []);\n\n    const login = async (username, password) => {\n        const response = await axiosInstance.post('/api/auth/login', { username, password });\n        const token = response.data.token;\n        localStorage.setItem('token', token);\n        axiosInstance.defaults.headers.common['Authorization'] = `Bearer ${token}`;\n        const decodedToken = decodeToken(token);\n        setUser({ username: decodedToken.username });\n    };\n\n    const register = async (username, password) => {\n        await axiosInstance.post('/api/auth/register', { username, password });\n    };\n\n    const logout = () => {\n        localStorage.removeItem('token');\n        delete axiosInstance.defaults.headers.common['Authorization'];\n        setUser(null);\n    };\n\n    const fetchCalendarEntries = async () => {\n        const response = await axiosInstance.get('/api/calendar/entries');\n        return response.data;\n    };\n\n    const addCalendarEntry = async (entry) => {\n        const response = await axiosInstance.post('/api/calendar/entries', entry);\n        return response.data;\n    };\n\n    const updateCalendarEntry = async (id, entry) => {\n        const response = await axiosInstance.put(`/api/calendar/entries/${id}`, entry);\n        return response.data;\n    };\n\n    const deleteCalendarEntry = async (id) => {\n        const response = await axiosInstance.delete(`/api/calendar/entries/${id}`);\n        return response.data;\n    };\n\n    return (\n        <AuthContext.Provider value={{ user, login, register, logout, fetchCalendarEntries, addCalendarEntry, updateCalendarEntry, deleteCalendarEntry }}>\n            {children}\n        </AuthContext.Provider>\n    );\n};\n\nexport { AuthContext, AuthProvider };"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,aAAa,CAAEC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CACjE,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,OAASC,WAAW,KAAQ,sBAAsB,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAEnD,KAAM,CAAAC,WAAW,cAAGP,aAAa,CAAC,CAAC,CAEnC,KAAM,CAAAQ,aAAa,CAAGL,KAAK,CAACM,MAAM,CAAC,CAC/BC,OAAO,CAAE,uBAAyB;AACtC,CAAC,CAAC,CAEF,KAAM,CAAAC,YAAY,CAAGC,IAAA,EAAkB,IAAjB,CAAEC,QAAS,CAAC,CAAAD,IAAA,CAC9B,KAAM,CAACE,IAAI,CAAEC,OAAO,CAAC,CAAGd,QAAQ,CAAC,IAAI,CAAC,CAEtCC,SAAS,CAAC,IAAM,CACZ,KAAM,CAAAc,KAAK,CAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAC3C,GAAIF,KAAK,CAAE,CACPR,aAAa,CAACW,QAAQ,CAACC,OAAO,CAACC,MAAM,CAAC,eAAe,CAAC,WAAAC,MAAA,CAAaN,KAAK,CAAE,CAC1E,KAAM,CAAAO,YAAY,CAAGnB,WAAW,CAACY,KAAK,CAAC,CACvCD,OAAO,CAAC,CAAES,QAAQ,CAAED,YAAY,CAACC,QAAS,CAAC,CAAC,CAChD,CACJ,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAC,KAAK,CAAG,KAAAA,CAAOD,QAAQ,CAAEE,QAAQ,GAAK,CACxC,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAAnB,aAAa,CAACoB,IAAI,CAAC,iBAAiB,CAAE,CAAEJ,QAAQ,CAAEE,QAAS,CAAC,CAAC,CACpF,KAAM,CAAAV,KAAK,CAAGW,QAAQ,CAACE,IAAI,CAACb,KAAK,CACjCC,YAAY,CAACa,OAAO,CAAC,OAAO,CAAEd,KAAK,CAAC,CACpCR,aAAa,CAACW,QAAQ,CAACC,OAAO,CAACC,MAAM,CAAC,eAAe,CAAC,WAAAC,MAAA,CAAaN,KAAK,CAAE,CAC1E,KAAM,CAAAO,YAAY,CAAGnB,WAAW,CAACY,KAAK,CAAC,CACvCD,OAAO,CAAC,CAAES,QAAQ,CAAED,YAAY,CAACC,QAAS,CAAC,CAAC,CAChD,CAAC,CAED,KAAM,CAAAO,QAAQ,CAAG,KAAAA,CAAOP,QAAQ,CAAEE,QAAQ,GAAK,CAC3C,KAAM,CAAAlB,aAAa,CAACoB,IAAI,CAAC,oBAAoB,CAAE,CAAEJ,QAAQ,CAAEE,QAAS,CAAC,CAAC,CAC1E,CAAC,CAED,KAAM,CAAAM,MAAM,CAAGA,CAAA,GAAM,CACjBf,YAAY,CAACgB,UAAU,CAAC,OAAO,CAAC,CAChC,MAAO,CAAAzB,aAAa,CAACW,QAAQ,CAACC,OAAO,CAACC,MAAM,CAAC,eAAe,CAAC,CAC7DN,OAAO,CAAC,IAAI,CAAC,CACjB,CAAC,CAED,KAAM,CAAAmB,oBAAoB,CAAG,KAAAA,CAAA,GAAY,CACrC,KAAM,CAAAP,QAAQ,CAAG,KAAM,CAAAnB,aAAa,CAAC2B,GAAG,CAAC,uBAAuB,CAAC,CACjE,MAAO,CAAAR,QAAQ,CAACE,IAAI,CACxB,CAAC,CAED,KAAM,CAAAO,gBAAgB,CAAG,KAAO,CAAAC,KAAK,EAAK,CACtC,KAAM,CAAAV,QAAQ,CAAG,KAAM,CAAAnB,aAAa,CAACoB,IAAI,CAAC,uBAAuB,CAAES,KAAK,CAAC,CACzE,MAAO,CAAAV,QAAQ,CAACE,IAAI,CACxB,CAAC,CAED,KAAM,CAAAS,mBAAmB,CAAG,KAAAA,CAAOC,EAAE,CAAEF,KAAK,GAAK,CAC7C,KAAM,CAAAV,QAAQ,CAAG,KAAM,CAAAnB,aAAa,CAACgC,GAAG,0BAAAlB,MAAA,CAA0BiB,EAAE,EAAIF,KAAK,CAAC,CAC9E,MAAO,CAAAV,QAAQ,CAACE,IAAI,CACxB,CAAC,CAED,KAAM,CAAAY,mBAAmB,CAAG,KAAO,CAAAF,EAAE,EAAK,CACtC,KAAM,CAAAZ,QAAQ,CAAG,KAAM,CAAAnB,aAAa,CAACkC,MAAM,0BAAApB,MAAA,CAA0BiB,EAAE,CAAE,CAAC,CAC1E,MAAO,CAAAZ,QAAQ,CAACE,IAAI,CACxB,CAAC,CAED,mBACIvB,IAAA,CAACC,WAAW,CAACoC,QAAQ,EAACC,KAAK,CAAE,CAAE9B,IAAI,CAAEW,KAAK,CAAEM,QAAQ,CAAEC,MAAM,CAAEE,oBAAoB,CAAEE,gBAAgB,CAAEE,mBAAmB,CAAEG,mBAAoB,CAAE,CAAA5B,QAAA,CAC5IA,QAAQ,CACS,CAAC,CAE/B,CAAC,CAED,OAASN,WAAW,CAAEI,YAAY","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}