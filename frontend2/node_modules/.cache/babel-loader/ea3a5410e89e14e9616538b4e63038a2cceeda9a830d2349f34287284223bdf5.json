{"ast":null,"code":"import React,{useContext,useEffect,useState}from'react';import{AuthContext}from\"../context/AuthContext\";import*as dateFns from'date-fns';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const{parseISO,addDays,startOfDay,endOfDay}=dateFns;const Home=()=>{const{fetchCalendarEntries,addCalendarEntry,updateCalendarEntry,deleteCalendarEntry}=useContext(AuthContext);const[entries,setEntries]=useState([]);const[newEntry,setNewEntry]=useState({title:'',description:'',date:'',category:''});const[editingEntry,setEditingEntry]=useState(null);const[showPanel,setShowPanel]=useState(false);const daysForward=7;// Change this number for testing purposes\nuseEffect(()=>{const getEntries=async()=>{const fetchedEntries=await fetchCalendarEntries();setEntries(fetchedEntries);};getEntries();},[fetchCalendarEntries]);const handleAddEntry=async e=>{e.preventDefault();const addedEntry=await addCalendarEntry(newEntry);setEntries([...entries,addedEntry]);setNewEntry({title:'',description:'',date:'',category:''});cancel();};const handleUpdateEntry=async e=>{e.preventDefault();const updated=await updateCalendarEntry(editingEntry._id,editingEntry);setEntries(entries.map(entry=>entry._id===editingEntry._id?updated:entry));setEditingEntry(null);};const handleDeleteEntry=async id=>{await deleteCalendarEntry(id);setEntries(entries.filter(entry=>entry._id!==id));};const handleEditEntry=entry=>{setEditingEntry(entry);};const cancel=()=>{const panel=document.querySelector('.background');panel.classList.remove('show');const addSessionBackground=document.querySelector('.addSessionBackground');addSessionBackground.classList.remove('show');setNewEntry({title:'',description:'',date:'',category:''});setEditingEntry(null);};const today=startOfDay(new Date());const endDate=endOfDay(addDays(today,daysForward));const filteredEntries=entries.filter(entry=>{const entryDate=parseISO(entry.date);return entryDate>=today&&entryDate<=endDate;});return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"eventsContainer\",children:filteredEntries.map(entry=>/*#__PURE__*/_jsxs(\"div\",{className:\"eventContainer\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"eventHeaderTitle\",children:entry.title}),/*#__PURE__*/_jsx(\"p\",{className:\"eventDescription\",children:entry.description}),/*#__PURE__*/_jsx(\"button\",{className:\"deleteButton\",onClick:()=>handleDeleteEntry(entry._id),children:\"Delete\"})]},entry._id))}),/*#__PURE__*/_jsx(\"div\",{className:\"addSessionBackground\",children:/*#__PURE__*/_jsxs(\"form\",{className:\"form\",onSubmit:editingEntry?handleUpdateEntry:handleAddEntry,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"topButtons\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"cancelButton\",onClick:()=>cancel(),children:\"Cancel\"}),/*#__PURE__*/_jsx(\"p\",{className:\"newSessionText\",children:\"New Session\"}),/*#__PURE__*/_jsx(\"button\",{className:\"submitButton\",type:\"submit\",children:editingEntry?'Update':'Add'})]}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Title\",value:editingEntry?editingEntry.title:newEntry.title,onChange:e=>editingEntry?setEditingEntry({...editingEntry,title:e.target.value}):setNewEntry({...newEntry,title:e.target.value}),required:true}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Description\",value:editingEntry?editingEntry.description:newEntry.description,onChange:e=>editingEntry?setEditingEntry({...editingEntry,description:e.target.value}):setNewEntry({...newEntry,description:e.target.value})}),/*#__PURE__*/_jsx(\"div\",{className:\"date-input-container\",children:/*#__PURE__*/_jsx(\"input\",{type:\"date\",className:\"date-input\",value:editingEntry?editingEntry.date:newEntry.date,onChange:e=>editingEntry?setEditingEntry({...editingEntry,date:e.target.value}):setNewEntry({...newEntry,date:e.target.value}),required:true})}),editingEntry&&/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setEditingEntry(null),children:\"Cancel\"})]})})]});};export default Home;","map":{"version":3,"names":["React","useContext","useEffect","useState","AuthContext","dateFns","jsx","_jsx","jsxs","_jsxs","parseISO","addDays","startOfDay","endOfDay","Home","fetchCalendarEntries","addCalendarEntry","updateCalendarEntry","deleteCalendarEntry","entries","setEntries","newEntry","setNewEntry","title","description","date","category","editingEntry","setEditingEntry","showPanel","setShowPanel","daysForward","getEntries","fetchedEntries","handleAddEntry","e","preventDefault","addedEntry","cancel","handleUpdateEntry","updated","_id","map","entry","handleDeleteEntry","id","filter","handleEditEntry","panel","document","querySelector","classList","remove","addSessionBackground","today","Date","endDate","filteredEntries","entryDate","children","className","onClick","onSubmit","type","placeholder","value","onChange","target","required"],"sources":["/Users/06mali01/WebstormProjects/workoutproject/frontend/src/components/Home.js"],"sourcesContent":["import React, { useContext, useEffect, useState } from 'react';\nimport { AuthContext } from \"../context/AuthContext\";\nimport * as dateFns from 'date-fns';\n\nconst { parseISO, addDays, startOfDay, endOfDay } = dateFns;\n\nconst Home = () => {\n    const { fetchCalendarEntries, addCalendarEntry, updateCalendarEntry, deleteCalendarEntry } = useContext(AuthContext);\n    const [entries, setEntries] = useState([]);\n    const [newEntry, setNewEntry] = useState({ title: '', description: '', date: '', category: '' });\n    const [editingEntry, setEditingEntry] = useState(null);\n    const [showPanel, setShowPanel] = useState(false);\n\n    const daysForward = 7; // Change this number for testing purposes\n\n    useEffect(() => {\n        const getEntries = async () => {\n            const fetchedEntries = await fetchCalendarEntries();\n            setEntries(fetchedEntries);\n        };\n\n        getEntries();\n    }, [fetchCalendarEntries]);\n\n    const handleAddEntry = async (e) => {\n        e.preventDefault();\n        const addedEntry = await addCalendarEntry(newEntry);\n        setEntries([...entries, addedEntry]);\n        setNewEntry({ title: '', description: '', date: '', category: '' });\n        cancel();\n    };\n\n    const handleUpdateEntry = async (e) => {\n        e.preventDefault();\n        const updated = await updateCalendarEntry(editingEntry._id, editingEntry);\n        setEntries(entries.map(entry => (entry._id === editingEntry._id ? updated : entry)));\n        setEditingEntry(null);\n    };\n\n    const handleDeleteEntry = async (id) => {\n        await deleteCalendarEntry(id);\n        setEntries(entries.filter(entry => entry._id !== id));\n    };\n\n    const handleEditEntry = (entry) => {\n        setEditingEntry(entry);\n    };\n\n    const cancel = () => {\n        const panel = document.querySelector('.background');\n        panel.classList.remove('show');\n        const addSessionBackground = document.querySelector('.addSessionBackground');\n        addSessionBackground.classList.remove('show');\n\n        setNewEntry({ title: '', description: '', date: '', category: '' });\n        setEditingEntry(null);\n    };\n\n    const today = startOfDay(new Date());\n    const endDate = endOfDay(addDays(today, daysForward));\n\n    const filteredEntries = entries.filter(entry => {\n        const entryDate = parseISO(entry.date);\n        return entryDate >= today && entryDate <= endDate;\n    });\n\n    return (\n        <div>\n            <div className=\"eventsContainer\">\n                {filteredEntries.map(entry => (\n                    <div key={entry._id} className=\"eventContainer\">\n                        <h2 className=\"eventHeaderTitle\">{entry.title}</h2>\n                        <p className=\"eventDescription\">{entry.description}</p>\n                        <button className=\"deleteButton\" onClick={() => handleDeleteEntry(entry._id)}>Delete</button>\n                    </div>\n                ))}\n            </div>\n            <div className=\"addSessionBackground\">\n                <form className=\"form\" onSubmit={editingEntry ? handleUpdateEntry : handleAddEntry}>\n                    <div className=\"topButtons\">\n                        <button type=\"button\" className=\"cancelButton\" onClick={() => cancel()}>Cancel</button>\n                        <p className=\"newSessionText\">New Session</p>\n                        <button className=\"submitButton\" type=\"submit\">{editingEntry ? 'Update' : 'Add'}</button>\n                    </div>\n                    <input\n                        type=\"text\"\n                        placeholder=\"Title\"\n                        value={editingEntry ? editingEntry.title : newEntry.title}\n                        onChange={(e) => editingEntry\n                            ? setEditingEntry({ ...editingEntry, title: e.target.value })\n                            : setNewEntry({ ...newEntry, title: e.target.value })\n                        }\n                        required\n                    />\n                    <input\n                        type=\"text\"\n                        placeholder=\"Description\"\n                        value={editingEntry ? editingEntry.description : newEntry.description}\n                        onChange={(e) => editingEntry\n                            ? setEditingEntry({ ...editingEntry, description: e.target.value })\n                            : setNewEntry({ ...newEntry, description: e.target.value })\n                        }\n                    />\n                    <div className=\"date-input-container\">\n                        <input\n                            type=\"date\"\n                            className=\"date-input\"\n                            value={editingEntry ? editingEntry.date : newEntry.date}\n                            onChange={(e) => editingEntry\n                                ? setEditingEntry({ ...editingEntry, date: e.target.value })\n                                : setNewEntry({ ...newEntry, date: e.target.value })\n                            }\n                            required\n                        />\n                    </div>\n                    {editingEntry && (\n                        <button type=\"button\" onClick={() => setEditingEntry(null)}>Cancel</button>\n                    )}\n                </form>\n            </div>\n        </div>\n    );\n};\n\nexport default Home;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}